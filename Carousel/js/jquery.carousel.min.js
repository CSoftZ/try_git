(function(c){function k(a){var b=a.$elts.content.children(),d=0;b.each(function(){$item=c(this);$itemHeight=$item.outerHeight();$itemHeight>d&&(d=$itemHeight)});0<a.params.verticalMargin&&(d+=a.params.verticalMargin);b.height(d);b=a.$elts.content.children(":first");a.itemWidth=b.outerWidth();"vertical"==a.params.direction?a.contentWidth=a.itemWidth:a.params.equalWidths?(b=a.itemWidth*a.steps.count,0!=a.params.marginRight&&(b=a.itemWidth*a.steps.count*a.params.marginRight),a.contentWidth=b):a.contentWidth=
function(){var b=0,d=0;a.$elts.content.children().each(function(){b+=c(this).outerWidth();d++});0!=a.params.marginRight&&(b+=d*a.params.marginRight);numItems=d;return b}();a.$elts.content.width(a.contentWidth);a.itemHeight=d;"vertical"==a.params.direction?(a.$elts.content.css({height:a.itemHeight*a.steps.count+"px"}),a.$elts.content.parent().css({height:a.itemHeight*a.params.dispItems+"px"})):a.$elts.content.parent().css({height:a.itemHeight+"px"});l(a)}function o(a){a.$elts.nextBtn.add(a.$elts.prevBtn).bind("enable",
function(){var b=c(this).unbind("click").bind("click",function(){a.params.ajaxMode&&b.is(".next")&&a.steps.first/a.params.dispItems==a.$elts.pagination.children().length-1&&!a.lastItemsToLoad?(p(a),a.$elts.content.ajaxSuccess(function(){})):(e(a,i(a,b.is(".next")?"next":"prev")),!0==a.params.stopSlideBtn?a.$elts.stopSlideBtn.trigger("pause"):j(a))}).removeClass("disabled").removeAttr("disabled");a.params.combinedClasses&&b.removeClass("next-disabled previous-disabled").removeAttr("disabled")}).bind("disable",
function(){var b=c(this).unbind("click").addClass("disabled").attr("disabled","disabled");a.params.combinedClasses&&(b.is(".next")?b.addClass("next-disabled"):b.is(".previous")&&b.addClass("previous-disabled"))}).hover(function(){c(this).toggleClass("hover")})}function q(a){a.$elts.pagination=c('<div class="center-wrap"><div class="carousel-pagination"><p></p></div></div>')["outside"==a.params.paginationPosition?"insertAfter":"appendTo"](a.$elts.carousel).find("p");a.$elts.paginationBtns=c([]);a.$elts.content.children().each(function(b){0==
b%a.params.dispItems&&m(a,b)})}function m(a,b){a.params.pagination&&(a.$elts.paginationBtns=a.$elts.paginationBtns.add(c('<a role="button"><span>'+a.params.tabLabel(a.$elts.paginationBtns.length+1)+"</span></a>").data("firstStep",b)).appendTo(a.$elts.pagination),a.$elts.paginationBtns.slice(0,1).addClass("active"),a.$elts.paginationBtns.click(function(){e(a,c(this).data("firstStep"));!0==a.params.stopSlideBtn?a.$elts.stopSlideBtn.trigger("pause"):j(a)}))}function r(a){a.params.useAddress&&c.isFunction(c.fn.address)?
c.address.init(function(){var b=c.address.pathNames();b[0]===a.params.adressIdentifier&&b[1]?e(a,b[1]-1):c.address.value("/"+a.params.adressIdentifier+"/1")}).change(function(){var b=c.address.pathNames();b[0]===a.params.adressIdentifier&&b[1]&&e(a,b[1]-1)}):a.params.useAddress=!1}function e(a,b){a.params.callback(b);var d=b,e=(a.itemHeight+a.params.marginTop)*d,f=(a.itemWidth+a.params.marginRight)*d,g=c("div#divWrap").width(),h=parseInt(g/(a.itemWidth+a.params.marginRight)),g=g-h*(a.itemWidth+a.params.marginRight);
modifiedStep=0;0>g&&(g=0);"vertical"!=a.params.direction&&1==a.params.dispItems&&a.params.padEmptySpace&&((btnNextPressed&&d<=h&&(d=modifiedStep=h),btnPrevPressed&&d==h-1&&(d=modifiedStep=0),d>=h)?(f=(a.itemWidth+a.params.marginRight)*(d-(h-1)),f-=g):f=0);switch(a.params.effect){case "no":"vertical"==a.params.direction?a.$elts.content.css("top",-e+"px"):a.$elts.content.css("left",-f+"px");break;case "fade":"vertical"==a.params.direction?a.$elts.content.hide().css("top",-e+"px").fadeIn(a.params.animSpeed):
a.$elts.content.hide().css("left",-f+"px").fadeIn(a.params.animSpeed);break;default:"vertical"==a.params.direction?a.$elts.content.stop().animate({top:-e+"px"},a.params.animSpeed,a.params.slideEasing):a.$elts.content.stop().animate({left:-f+"px"},a.params.animSpeed,a.params.slideEasing)}a.steps.first=b;a.params.padEmptySpace&&0!=modifiedStep&&(a.steps.first=modifiedStep);l(a);a.params.useAddress&&c.address.value("/"+a.params.adressIdentifier+"/"+(b+1))}function i(a,b){btnPrevPressed=btnNextPressed=
!1;if("prev"==b)return btnPrevPressed=!0,a.params.showEmptyItems?0<=a.steps.first-a.params.dispItems?a.steps.first-a.params.dispItems:a.params.loop?a.steps.count-a.params.dispItems:!1:0==a.steps.first?a.params.loop?a.steps.count-a.params.dispItems:!1:Math.max(0,a.steps.first-a.params.dispItems);if("next"==b)return btnNextPressed=!0,a.steps.first+a.params.dispItems<a.steps.count?a.params.showEmptyItems?a.steps.first+a.params.dispItems:Math.min(a.steps.first+a.params.dispItems,a.steps.count-a.params.dispItems):
a.params.loop?0:!1}function l(a){!1!==i(a,"prev")?a.$elts.prevBtn.trigger("enable"):a.$elts.prevBtn.trigger("disable");!1!==i(a,"next")?a.$elts.nextBtn.trigger("enable"):a.$elts.nextBtn.trigger("disable");a.params.pagination&&a.$elts.paginationBtns.removeClass("active").filter(function(){return c(this).data("firstStep")==a.steps.first}).addClass("active")}function n(a){a.delayAutoSlide=window.setTimeout(function(){a.autoSlideInterval=window.setInterval(function(){e(a,i(a,"next"))},a.params.autoSlideInterval)},
a.params.delayAutoSlide)}function j(a){window.clearTimeout(a.delayAutoSlide);window.clearInterval(a.autoSlideInterval);a.params.delayAutoSlide=0}function s(a){var b=a.$elts.stopSlideBtn;b.bind({play:function(){n(a);b.removeClass("pause").addClass("play").html(a.params.stopSlideTextPause)},pause:function(){j(a);b.removeClass("play").addClass("pause").html(a.params.stopSlideTextPlay)}});b.click(function(){b.is(".play")?b.trigger("pause"):b.is(".pause")&&b.trigger("play")});b.prependTo(a.$elts.wrap)}
function p(a){a.$elts.carousel.prepend(a.$elts.loader);c.ajax({url:a.params.ajaxUrl,dataType:"json",success:function(b){a.lastItemsToLoad=b.bLastItemsToLoad;c(a.$elts.content).append(b.shtml);a.steps={first:a.steps.first+a.params.dispItems,count:a.$elts.content.children().length};a.steps.last=a.steps.count-1;k(a);m(a,a.steps.first);e(a,a.steps.first);!0==a.params.stopSlideBtn?a.$elts.stopSlideBtn.trigger("pause"):j(a);a.$elts.loader.remove()}})}c.fn.carousel=function(a){a=c.extend({direction:"horizontal",
loop:!1,dispItems:1,pagination:!1,paginationPosition:"inside",nextBtn:'<a role="button">Next</a>',prevBtn:'<a role="button">Previous</a>',btnsPosition:"inside",nextBtnInsert:"insertAfter",prevBtnInsert:"insertBefore",nextBtnInsertFn:!1,prevBtnInsertFn:!1,autoSlide:!1,autoSlideInterval:3E3,delayAutoSlide:!1,combinedClasses:!1,effect:"slide",slideEasing:"swing",animSpeed:300,equalWidths:!1,verticalMargin:0,callback:function(){},useAddress:!1,adressIdentifier:"carousel",tabLabel:function(a){return a},
showEmptyItems:!0,ajaxMode:!1,ajaxUrl:"",stopSlideBtn:!1,stopSlideTextPause:"Pause",stopSlideTextPlay:"Play",startAt:0,marginRight:0,marginTop:0,padEmptySpace:!1},a);"outside"==a.btnsPosition&&(a.prevBtnInsert="insertBefore",a.nextBtnInsert="insertAfter");a.delayAutoSlide=0+a.delayAutoSlide;return this.each(function(){var b={$elts:{},params:a,launchOnLoad:[]};b.$elts.carousel=c(this).addClass("js");b.$elts.content=c(this).children().css({position:"absolute",top:0});b.$elts.wrap=b.$elts.content.wrap('<div id="divWrap" class="carousel-wrap"></div>').parent().css({overflow:"hidden",
position:"relative"});b.steps={first:0,count:b.$elts.content.children().length};b.$elts.loader=c('<div class="loader"></div>').css({position:"absolute"});b.steps.last=b.steps.count-1;b.params.pagination&&q(b);b.$elts.prevBtn=c.isFunction(b.params.prevBtnInsertFn)?b.params.prevBtnInsertFn(b.$elts):a.btnsPosition=="outside"?c(a.prevBtn)[a.prevBtnInsert](b.$elts.carousel):c(a.prevBtn)[a.prevBtnInsert](b.$elts.wrap);b.$elts.nextBtn=c.isFunction(b.params.nextBtnInsertFn)?b.params.nextBtnInsertFn(b.$elts):
a.btnsPosition=="outside"?c(a.nextBtn)[a.nextBtnInsert](b.$elts.carousel):c(a.nextBtn)[a.nextBtnInsert](b.$elts.wrap);b.$elts.nextBtn.addClass("carousel-control next carousel-next");b.$elts.prevBtn.addClass("carousel-control previous carousel-previous");b.lastItemsToLoad;o(b);b.$elts.carousel.attr("tabindex",0).add(b.$elts.carousel.children()).bind({focus:function(){c(document).bind("keypress",function(a){switch(a.keyCode){case 39:b.$elts.nextBtn.click();break;case 37:b.$elts.prevBtn.click()}switch(a.charCode){case 110:b.$elts.nextBtn.click();
break;case 112:b.$elts.prevBtn.click()}})},blur:function(){c(document).unbind("keypress")}});r(b);c(function(){k(b);c.each(b.launchOnLoad,function(a,b){b()});b.params.autoSlide&&n(b);if(a.stopSlideBtn==true){b.$elts.stopSlideBtn=c('<button type="button" class="slide-control play">'+a.stopSlideTextPause+"</button>");s(b)}a.startAt>0&&e(b,a.startAt)})})}})(jQuery);
